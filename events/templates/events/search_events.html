{%extends 'events/base.html'%}

{%block content%}
    <form class="d-flex" method=POST action="{%url 'search-events'%}">
        {%csrf_token%}
        <input class="form-control me-2" type="search" placeholder="Search Events" aria-label="Search" name='searched_events'><button class="btn btn-outline-success" type="submit">Search</button>
      </form><br/>
    <div class="card"> 
        <h2 class="card-header">
            {%if searched_events%}
            You Searched for {{searched_events}}
            {%else%}
            Your request is empty
            {%endif%} 
        </h2> 
    </div>
    <br/>
    {%for event in events%}
    <div class="card">
        <h5 class="card-header"><a href={%url 'show-event' event.id%}>{{event}}</a></h5>
        <div class="card-body">
          <h5 class="card-title"> Venue : {{event.venue}}</h5>
          <p class="card-text">
            <strong>Date:</strong> {{event.event_date}}<br/>
            <strong>Venue web address:</strong> {{event.venue.web_address}}<br/>
            <strong>Manager:</strong> {{event.manager}}<br/>
            <strong>Description:</strong> {{event.description}}<br/>
            <strong>Attendees:</strong> 
            {%for user in event.attendees.all%} 
                {{user}},
            {%endfor%}<br/>
    
          </p>
        </div>
        <div class ="card-footer text-muted">
          {%if user.is_authenticated%}
          {%if user == event.manager or user.is_superuser%}<!--or user.is_superuser-->
            <a href = "{%url 'update-event' event.id%}" class="btn btn-outline-success btn-sm"> Update Event </a>
            <a href = "{%url 'delete-event' event.id%}" class="btn btn-outline-danger btn-sm"> Delete Event </a>
          {%endif%}
          {%endif%}
        </div>
      </div>

    <ul> </ul>
    {%endfor%} 
    <center>
    <br/>
    <br/>
    <br/>
    Copyright (c) {{current_year}}
    
    </center>
{%endblock%}